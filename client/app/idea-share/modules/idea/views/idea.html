<div class="top-heading">
	<h1>idea</h1>
</div>
<div class="grid">
	<div class="row">
		<div class="col form">
			<div class="ui-line">
				<h2>Please brief your idea</h2>
				<input type="text" data-ng-model="idea.brief" data-ng-show="idea.editable">
				<span data-ng-hide="idea.editable">{{idea.brief}}</span>
			</div>
			<div class="ui-line">
				<button type="button" class="button-low" data-ng-click="saveIdea()" data-ng-show="idea.editable">
					<i class="fa fa-save"></i>Change</button>
			</div>
			<div data-ng-repeat="frag in idea.fragments" data-ng-hide="frag.deleted">
				<div class="ui-line">
					<textarea rows="5" data-ng-model="frag.content" data-ng-show="frag._edit"></textarea>
					<pre data-ng-hide="frag._edit">{{frag.content}}</pre>
				</div>
				<div class="ui-line clearfix break-half">
					<p class="pull-right">
						<span>Modified <span sh-auto-refresh>{{frag.modified.fromNow()}}</span></span>
					</p>
					<button type="button" class="button-light button-min button-low" data-ng-click="editFragment(frag)" data-ng-if="idea.editable" data-ng-hide="frag._edit">
						<i class="fa fa-edit"></i></button>
					<button type="button" class="button-light button-min button-low" data-ng-click="saveFragment(frag)" data-ng-if="idea.editable" data-ng-show="!new && frag._edit">
						<i class="fa fa-save"></button>
					<button type="button" class="button-light button-min button-low" data-ng-click="discardFragmentChanges(frag)" data-ng-if="idea.editable" data-ng-show="!new && frag._edit">
						<i class="fa fa-remove"></i></button>
					<button type="button" class="button-light button-min button-low" data-ng-click="deleteFragment(frag, $index)" data-ng-if="idea.editable">
						<i class="fa fa-trash"></i></button>
				</div>
			</div>

			<div class="ui-line">
				<button type="button" class="button-full button-high" data-ng-click="addFragment()" data-ng-if="idea.editable">
					<i class="fa fa-plus fa-lg"></i>Add fragments</button>
			</div>
		</div>
		<div class="col form" data-ng-if="!new">
			<div class="ui-line">
				<h2>Discussion threads</h2>
				<textarea rows="5" data-ng-model="newComment.content"></textarea>
			</div>
			<div class="ui-line break">
				<button type="button" data-ng-click="postComment()">Post</button>
			</div>

			<section data-ng-repeat="comment in comments">
				<div class="ui-line">
					<pre>{{comment.content}}</pre>
				</div>
				<div class="ui-line break-half text-right">
					<span>
						<b>{{comment.owner.public.displayName}}</b>&nbsp;posted&nbsp;<label sh-auto-refresh>{{comment.created.fromNow()}}</label>
					</span>
				</div>
			</section>
		</div>
	</div>
</div>
